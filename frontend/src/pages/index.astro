---
import Layout from '../layouts/Layout.astro';
---

<Layout pageTitle = "HomePage">
	<div id="app" class="container mx-auto p-4">
		<h1 class="text-2xl font-bold mb-4">Portfolios</h1>
		<div id="portfolios" class="space-y-4">
			<!-- Portfolios will be rendered here -->
		</div>
	</div>
</Layout>

<script>
    import axios from 'axios';

        //make a POST request using Axios
        axios.get('http://127.0.0.1:8000/get-all-portfolios/')
        .then(response => {
            console.log('Response:', response.data);
			const portfolios = response.data.portfolios;
			const portfoliosContainer = document.getElementById('portfolios')

			portfolios.forEach(portfolio => {
				const portfolioElement = document.createElement('div');
				portfolioElement.classList.add('p-4', 'bg-white', 'shadow-md', 'rounded-md');
				portfolioElement.innerHTML = `<h2 class="text-xl font-semibold">${portfolio.name}</h2> <p class="text-gray-600">Portfolio ID: ${portfolio.portfolio_id}</p>`;

				portfoliosContainer.appendChild(portfolioElement);
			});
            // Display success message
        })
        .catch (error => {
            console.error('Error:', error);
            // Display error message
        });
</script>